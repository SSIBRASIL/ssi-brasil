<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OM RP Engenharia</title>

<style>
body{font-family:Arial;background:#eef2f6;margin:0;padding:10px}
.container{max-width:1100px;margin:auto;background:#fff;padding:15px;border-radius:12px}

/* LOGO TOPO PREENCHENDO */
.topo-img{
  width:100%;
  height:130px;            /* ajuste a altura do topo aqui */
  object-fit:cover;        /* preenche o topo (pode cortar) */
  /* object-fit:contain; */ /* se preferir SEM cortar, use contain */
  display:block;
  margin-bottom:10px;
  border-radius:10px;
}

h2{background:#0b3d91;color:#fff;padding:8px;border-radius:6px;font-size:16px}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
@media(max-width:768px){.grid{grid-template-columns:1fr}}

.campo{display:flex;flex-direction:column;font-size:13px;font-weight:bold}
.campo span{margin-bottom:2px;color:#0b3d91}

input,select,textarea{width:100%;padding:8px;border-radius:6px;border:1px solid #aaa;font-weight:normal}
textarea{min-height:60px}

button{width:100%;margin-top:10px;background:#0b3d91;color:#fff;border:none;padding:12px;border-radius:8px;font-size:16px;cursor:pointer}
.btn-sec{background:#1d6fd8}
.btn-danger{background:#b42318}

canvas{border:1px solid #333;border-radius:8px;width:100%;height:180px;background:#fff;touch-action:none}
.photo-preview img{height:70px;margin:4px;border-radius:6px;border:1px solid #ccc}
.nota{font-size:12px;color:#444;margin-top:8px}

.group-row{
  display:grid;
  grid-template-columns: 1.2fr 1fr 1fr 1fr 0.8fr;
  gap:8px;
  align-items:end;
  margin-top:8px;
}
@media(max-width:768px){.group-row{grid-template-columns:1fr}}
.group-row .remover{height:38px;margin-top:0}

.team-row{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
@media(max-width:768px){.team-row{grid-template-columns:1fr}}
.team-extra-row{
  display:grid;
  grid-template-columns: 1fr 0.8fr;
  gap:8px;
  align-items:end;
  margin-top:8px;
}
@media(max-width:768px){.team-extra-row{grid-template-columns:1fr}}
.team-extra-row .remover{height:38px;margin-top:0}
</style>
</head>

<body>
<div class="container">

<img src="RP.jpg" class="topo-img" alt="RP Engenharia">

<h2>Dados Gerais</h2>
<div class="grid">
  <div class="campo"><span>Instala√ß√£o *</span><input id="instalacao"></div>
  <div class="campo"><span>Munic√≠pio *</span><input id="municipio"></div>
  <div class="campo"><span>OS SAP *</span><input id="os"></div>
  <div class="campo"><span>Data</span><input type="date" id="data"></div>
  <div class="campo"><span>Hora</span><input type="time" id="hora"></div>
</div>

<h2>Documenta√ß√£o de Seguran√ßa:</h2>
<div class="grid">
  <div class="campo"><span>APR</span><select id="apr"><option value="">Selecione</option><option>Sim</option><option>N√£o</option></select></div>
  <div class="campo"><span>LPE</span><select id="lpe"><option value="">Selecione</option><option>Sim</option><option>N√£o</option></select></div>
  <div class="campo"><span>PET</span><select id="pet"><option value="">Selecione</option><option>Sim</option><option>N√£o</option></select></div>
</div>

<h2>Equipe</h2>
<div class="team-row">
  <div class="campo"><span>Nome 1 *</span><input id="nome1"></div>
  <div class="campo"><span>Nome 2 *</span><input id="nome2"></div>
</div>

<div id="team_extras" style="margin-top:8px;"></div>
<button type="button" class="btn-sec" id="btn_add_team">‚ûï Adicionar membro (opcional)</button>

<h2>Esta√ß√£o / Grupos</h2>
<div class="campo">
  <span>Esta√ß√£o/Grupo permaneceu desligado ou indispon√≠vel durante a manuten√ß√£o? *</span>
  <select id="grupo_status">
    <option value="">Selecione</option>
    <option>N√£o</option>
    <option>Sim</option>
  </select>
</div>

<div id="grupos_box" style="display:none; margin-top:10px;">
  <div class="campo">
    <span>Grupos indispon√≠veis (adicione quantos forem necess√°rios)</span>
    <button type="button" class="btn-sec" id="btn_add_grupo">‚ûï Adicionar Grupo</button>
  </div>
  <div id="lista_grupos"></div>
</div>

<!-- ===== GRANDEZAS EL√âTRICAS (MANTIDO) ===== -->
<h2>Grandezas El√©tricas</h2>
<div class="campo">
  <span>Necess√°rio medir grandezas el√©tricas? *</span>
  <select id="medir_status">
    <option value="">Selecione</option>
    <option>N√£o</option>
    <option>Sim</option>
  </select>
</div>

<div id="medir_box" style="display:none; margin-top:8px;">
  <div class="campo">
    <span>Preencher medi√ß√µes (ex.: V, A, kW, FP, Hz, etc.) *</span>
    <textarea id="medir_dados" placeholder="Ex.: Tens√£o: 380V | Corrente: 22A | Pot√™ncia: 11kW | FP: 0,92 | Frequ√™ncia: 60Hz"></textarea>
  </div>
</div>

<!-- ===== INSPE√á√ÉO HIDR√ÅULICA ===== -->
<h2>Inspe√ß√£o Hidr√°ulica</h2>
<div class="campo">
  <span>Necess√°rio realizar inspe√ß√£o hidr√°ulica / medir grandezas? *</span>
  <select id="hid_status">
    <option value="">Selecione</option>
    <option>N√£o</option>
    <option>Sim</option>
  </select>
</div>

<div id="hid_box" style="display:none; margin-top:8px;">
  <div class="campo">
    <span>Preencher medi√ß√µes hidr√°ulicas (ex.: Press√£o, Vaz√£o, N√≠vel, etc.) *</span>
    <textarea id="hid_dados" placeholder="Ex.: Press√£o: 6,2 bar | Vaz√£o: 18 m¬≥/h | N√≠vel: 72% | Observa√ß√£o: ..."></textarea>
  </div>
</div>

<!-- ===== MATERIAIS ===== -->
<h2>Materiais</h2>
<div class="campo">
  <span>Houve materiais substitu√≠dos / instalados / retirados? *</span>
  <select id="mat_status">
    <option value="">Selecione</option>
    <option>N√£o</option>
    <option>Sim</option>
  </select>
</div>

<div id="mat_box" style="display:none; margin-top:8px;">
  <div class="campo">
    <span>Descrever materiais (substitu√≠dos, instalados e/ou retirados) *</span>
    <textarea id="mat_dados" placeholder="Ex.: Substitu√≠do: v√°lvula 2'' | Instalado: man√¥metro 0-10 bar | Retirado: filtro Y..."></textarea>
  </div>
</div>

<h2>Servi√ßos</h2>
<!-- ORDEM ALTERADA: OCORR√äNCIA PRIMEIRO -->
<div class="campo"><span>Ocorr√™ncia *</span><textarea id="ocorrencia"></textarea></div>
<div class="campo"><span>Situa√ß√£o encontrada *</span><textarea id="resumo"></textarea></div>
<div class="campo"><span>Servi√ßo realizado</span><textarea id="realizado"></textarea></div>

<h2>Fotos (obrigat√≥rio)</h2>
<input type="file" id="fotos" multiple accept="image/*">
<div class="photo-preview" id="preview"></div>

<h2>Respons√°vel</h2>
<div class="campo"><span>Nome do respons√°vel *</span><input id="responsavel"></div>

<h2>Assinatura</h2>
<canvas id="sign"></canvas>
<button type="button" onclick="limparAssinatura()">Limpar assinatura</button>

<button type="button" onclick="gerarPDF()">üíæ SALVAR PDF</button>
<button type="button" onclick="enviarWhats()">üì≤ ENVIAR WHATSAPP</button>

<div class="nota">
  * No celular, o envio tenta anexar o PDF automaticamente via compartilhamento. No PC, o WhatsApp abre com a mensagem pronta e o anexo √© manual (limita√ß√£o do WhatsApp Web).
</div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>

<script>
// ========= CONFIG =========
const WHATS_PHONE = "5511981374513"; // troque aqui

// ========= HELPERS =========
function isBlank(v){ return !v || !String(v).trim(); }
function dataHoraArquivo(){
  const d = new Date();
  const yyyy = d.getFullYear();
  const mm = String(d.getMonth()+1).padStart(2,"0");
  const dd = String(d.getDate()).padStart(2,"0");
  const hh = String(d.getHours()).padStart(2,"0");
  const mi = String(d.getMinutes()).padStart(2,"0");
  return `${yyyy}${mm}${dd}_${hh}${mi}`;
}
function limparTextoArquivo(s){
  return (s || "")
    .toString()
    .trim()
    .replace(/[^\w\-]+/g, "_")
    .replace(/_+/g, "_ see")
}
</script>
</body>
</html>
